<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestione Appuntamenti</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            max-width: 800px;
            width: 100%;
            padding: 20px;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
            color: #333;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
        }
        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .button-group {
            text-align: center;
        }
        .button-group button {
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 5px;
            background-color: #333;
            color: #fff;
            cursor: pointer;
        }
        .button-group button:hover {
            background-color: #555;
        }
        .appointments-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .appointments-table, .appointments-table th, .appointments-table td {
            border: 1px solid #ddd;
        }
        .appointments-table th, .appointments-table td {
            padding: 8px;
            text-align: left;
        }
        .appointments-table th {
            background-color: #f2f2f2;
        }
        .delete-button {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background-color: #dc3545;
            color: white;
            cursor: pointer;
        }
        .delete-button:hover {
            background-color: #c82333;
        }
        .edit-button {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }
        .edit-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Gestione Appuntamenti</h2>
        <div class="input-group">
            <label for="ownerName">Nome del Proprietario:</label>
            <input type="text" id="ownerName">
        </div>
        <div class="input-group">
            <label for="appointmentDate">Data e ora dell'appuntamento:</label>
            <input type="datetime-local" id="appointmentDate">
        </div>
        <div class="input-group">
            <label for="notes">Note:</label>
            <textarea id="notes" rows="4"></textarea>
        </div>
        <div class="button-group">
            <button onclick="saveAppointment()">Salva Appuntamento</button>
            <button onclick="window.location.href='index.html'">Torna alla Home</button>
        </div>
        <table class="appointments-table" id="appointmentsTable">
            <thead>
                <tr>
                    <th>Nome del Proprietario</th>
                    <th>Data e Ora</th>
                    <th>Note</th>
                    <th>Azioni</th>
                </tr>
            </thead>
            <tbody>
                <!-- Gli appuntamenti saranno caricati qui tramite JavaScript -->
            </tbody>
        </table>
    </div>
    <script>
        function loadAppointments() {
            const appointments = JSON.parse(localStorage.getItem('appointments')) || [];
            const tbody = document.querySelector('#appointmentsTable tbody');
            tbody.innerHTML = '';

            appointments.forEach((appointment, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${appointment.ownerName}</td>
                    <td>${new Date(appointment.appointmentDate).toLocaleString('it-IT')}</td>
                    <td>${appointment.notes}</td>
                    <td>
                        <button class="edit-button" onclick="editAppointment(${index})">Modifica</button>
                        <button class="delete-button" onclick="deleteAppointment(${index})">Elimina</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function saveAppointment() {
            const ownerName = document.getElementById('ownerName').value;
            const appointmentDate = document.getElementById('appointmentDate').value;
            const notes = document.getElementById('notes').value;

            if (!ownerName || !appointmentDate) {
                alert('Per favore, inserisci tutti i dati richiesti.');
                return;
            }

            const appointment = {
                ownerName,
                appointmentDate,
                notes
            };

            let appointments = JSON.parse(localStorage.getItem('appointments')) || [];
            appointments.push(appointment);
            localStorage.setItem('appointments', JSON.stringify(appointments));

            alert('Appuntamento salvato con successo!');
            loadAppointments();
        }

        function deleteAppointment(index) {
            let appointments = JSON.parse(localStorage.getItem('appointments')) || [];
            appointments.splice(index, 1);
            localStorage.setItem('appointments', JSON.stringify(appointments));
            loadAppointments();
        }

        function editAppointment(index) {
            const appointments = JSON.parse(localStorage.getItem('appointments')) || [];
            const appointment = appointments[index];

            document.getElementById('ownerName').value = appointment.ownerName;
            document.getElementById('appointmentDate').value = appointment.appointmentDate;
            document.getElementById('notes').value = appointment.notes;

            appointments.splice(index, 1);
            localStorage.setItem('appointments', JSON.stringify(appointments));

            document.querySelector('.button-group button').innerText = 'Aggiorna Appuntamento';
        }

        document.addEventListener('DOMContentLoaded', loadAppointments);
    </script>
</body>
</html>

